<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tic Tac Toe</title>
    <style>

        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
        }

        body {
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        #tabuleiro {
            display: grid;
            grid-template-columns: repeat(3, 100px);
            grid-template-rows: repeat(3, 100px);
        }

        .casa {
            border: 2px solid rgba(0, 5, 60, 0.684);
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 34px;
            cursor: pointer;
        }
        
        .pjogd {
            font-size: 24px;
            font-family: Arial, sans-serif;
            margin-top: 5px;
        }
    </style>
</head>
<body>

    <div>
        <div id="tabuleiro">
            <div class="casa" id="c1"></div>
            <div class="casa" id="c2"></div>
            <div class="casa" id="c3"></div>
            <div class="casa" id="c4"></div>
            <div class="casa" id="c5"></div>
            <div class="casa" id="c6"></div>
            <div class="casa" id="c7"></div>
            <div class="casa" id="c8"></div>
            <div class="casa" id="c9"></div>
        </div>

        <div class="pjogd">
            Jogador: <span id="jogador">X</span>
        </div>
    </div>
    

    <script>
        let jogador = "X"

        let ec1 = document.getElementById("c1");
        let ec2 = document.getElementById("c2");
        let ec3 = document.getElementById("c3");
        let ec4 = document.getElementById("c4");
        let ec5 = document.getElementById("c5");
        let ec6 = document.getElementById("c6");
        let ec7 = document.getElementById("c7");
        let ec8 = document.getElementById("c8");
        let ec9 = document.getElementById("c9");

        let casas = [ec1, ec2, ec3, ec4, ec5, ec6, ec7, ec8, ec9];

        let displayJogador = document.getElementById("jogador");
        let hackCounter = 0;

        // devolve "X" ou "O" se houver vencedor, ou "" se n√£o houver
        function detetarVencedor() {
            const linhas = [
                [ec1, ec2, ec3],
                [ec4, ec5, ec6],
                [ec7, ec8, ec9],
                [ec1, ec4, ec7],
                [ec2, ec5, ec8],
                [ec3, ec6, ec9],
                [ec1, ec5, ec9],
                [ec3, ec5, ec7]
            ];

            for (let linha of linhas) {
                if (linha[0].innerText !== "" &&
                        linha[0].innerText === linha[1].innerText && 
                        linha[1].innerText === linha[2].innerText) {
                    return linha[0].innerText;
                }
            }

            return "";
        }

        for (let casa of casas) {
            casa.addEventListener("click", function() {
                console.log("Clicou na casa " + casa.id);
                hackCounter -= 1;
                if (casa.innerText !== "" && hackCounter<3) return;
                hackCounter = 0;
                casa.innerText = jogador;
                jogador = jogador === "X" ? "O" : "X";
                displayJogador.innerText = jogador;

                let vencedor = detetarVencedor();
                if (vencedor !== "") {
                    displayJogador.innerText = vencedor + " venceu!";
                }

            });
        }

        
        document.body.addEventListener("click", function() {
            hackCounter++;
            console.log("Hack counter: " + hackCounter);
        });
        
    </script>

</body>
</html>
